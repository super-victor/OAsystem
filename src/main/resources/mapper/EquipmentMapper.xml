<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd" >
<mapper namespace="com.sicnu.oasystem.mapper.EquipmentMapper">

    <insert id="addEquipment">
        insert into equipment(equipmentClassifyId,meetingRoomId,name,isMaintain,remark,num)
        values (#{param1},#{param2},#{param3},#{param4},#{param5},#{param6})
    </insert>

    <update id="updateEquipment">
        update equipment set equipmentId=#{equipmentId} ,remark=#{param6}
        <if test="param2 !=null">
            ,equipmentclassifyId=#{param2}
        </if>
        <if test="param3 !=null">
            ,meetingroomId=#{param3}
        </if>
        <if test="param4 !=null">
            ,name=#{param4}
        </if>
        <if test="param5 !=null">
            ,isMaintain=#{param5}
        </if>
        <if test="param7!=null and param7>=0">
            ,num=#{param7}
        </if>
        where equipmentId=#{equipmentId}
    </update>
    <update id="updateeq">
        update equipment set num=5 where equipmentId=#{equipmentId}
    </update>

    <delete id="deleteEuipment">
        delete from equipment where equipmentId=#{equipmentId}
    </delete>
    <select id="getallEquipment" resultType="com.sicnu.oasystem.pojo.Equipment">
        select equipment.*,meetingroom.name as meetingRoomName,equipmentclassify.name as equipmentclassifyName from equipment,meetingroom,equipmentclassify
        where equipment.meetingRoomId=meetingroom.meetingRoomId and equipment.equipmentclassifyid=equipmentclassify.equipmentclassifyid
    </select>
    <select id="getEquipmentById" resultType="com.sicnu.oasystem.pojo.Equipment">
        select equipment.*,meetingroom.name as meetingRoomName,equipmentclassify.name as equipmentclassifyName from equipment,meetingroom,equipmentclassify where equipmentId=#{equipmentId}
        and equipment.meetingRoomId=meetingroom.meetingRoomId and equipment.equipmentclassifyid=equipmentclassify.equipmentclassifyid
    </select>
    <select id="getEquipmentByCondition" resultType="com.sicnu.oasystem.pojo.Equipment">
        select equipment.*,meetingroom.name as meetingRoomName,equipmentclassify.name as equipmentclassifyName from equipment,meetingroom,equipmentclassify
        where equipment.meetingRoomId=meetingroom.meetingRoomId and equipment.equipmentclassifyid=equipmentclassify.equipmentclassifyid
        <if test="param1!=null and param1>0">
            and meetingroom.meetingRoomId=#{param1}
        </if>
        <if test="param2!=null and param2>0">
            and equipment.equipmentclassifyid=#{param2}
        </if>
        <if test="param3!=null">
            and equipment.name=#{param3}
        </if>
    </select>
    <select id="getEquipmentByclassifyAndRoomAndname" resultType="com.sicnu.oasystem.pojo.Equipment">
        select equipment.*,meetingroom.name as meetingRoomName,equipmentclassify.name as equipmentclassifyName from equipment,meetingroom,equipmentclassify where
         equipment.meetingRoomId=meetingroom.meetingRoomId and equipment.equipmentclassifyid=equipmentclassify.equipmentclassifyid
        and equipmentclassify.equipmentclassifyId=#{param1} and meetingroom.meetingRoomId=#{param2} and equipment.name=#{param3}
    </select>

</mapper>